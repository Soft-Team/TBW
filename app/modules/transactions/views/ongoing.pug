extends ../../../templates/dash.pug

block main
  .jumbotron-banner
    center
      h1.text-white Manage Your Ongoing Transactions

  p  
  center
    .container(style='margin-bottom: 133px !important;')
      p.font
        table.table.table-striped.font1.box-shadow-mini
          thead
            tr.text-white
              th(scope='col') Role
              th(scope='col') Partner
              each thisuser in thisUserTab
                each trans in ongoingtab
                  if trans.intServAccNo != thisuser.intAccNo  
                    th(scope='col', style='padding-left:0px; padding-right:0px;') &nbsp
              th(scope='col', style='text-align: right; padding-right: 0px') Sche
              th(scope='col', style='padding-left:0px; padding-right:0px; text-align: left;') dule
              th(scope='col', style='padding-left:0px; padding-right:0px;') &nbsp
              th(scope='col', style='padding-left:0px; padding-right:0px;') &nbsp
              each thisuser in thisUserTab
                each trans in ongoingtab
                  if trans.intServAccNo == thisuser.intAccNo  
                    th(scope='col', style='padding-left:0px; padding-right:0px;') &nbsp
              
          tbody
            each thisuser in thisUserTab
              each trans in ongoingtab
                tr
                  if trans.intServAccNo == thisuser.intAccNo 
                    td Provider
                  else
                    td Seeker
                  td #{trans.strName}
                  if trans.intServAccNo != thisuser.intAccNo 
                    td
                  td(style='width: 300px !important; padding-right:5px; padding-left:0px; text-align: right;')
                    | #{trans.date} - #{trans.time}
                  td(style='padding-left:0px; padding-right:0px; padding-top: 7px; width: 45px !important;')
                      a(href='/messages/'+trans.intChatID, data-toggle='tooltip', data-placement='bottom', title='Message')
                        img.size(src='/assets/images/icons/Message2.png', alt='Message', style='height:40px; width:40px;')
                  td(style='padding-left:0px; padding-right:0px; padding-top: 7px; width: 40px !important;')
                      a(href='/invoice/'+trans.intTransID, data-toggle='tooltip', data-placement='bottom', title='Invoice')
                        img.size(src='/assets/images/icons/Invoice2.png', alt='Invoice', style='height:38px; width:40px;')
                  if trans.intServAccNo == thisuser.intAccNo 
                    td(style='padding-left:0px; padding-right:0px; padding-top: 7px; width: 90px !important;')
                      a.button.btn.btn-success(href='/transactions/ongoing/finish/'+trans.intTransID)
                        span(style='margin-right:3px') Finish
                        i.fa.fa-check-circle
                  td(style='padding-left:0px; padding-right: 60px; width: 39px !important;')
                      a(href='', data-toggle='tooltip', data-placement='bottom', title='Cancel')
                        img.size(src='/assets/images/icons/Cancel2.png', alt='Cancel', style='height:27px; width:27px;')

  block ongoingtrans
